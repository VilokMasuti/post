
import { Link } from "react-router-dom";
import { Search, Menu } from "lucide-react";
import { Input } from "@/components/ui/input";
import { Button } from "@/components/ui/button";
import { useState } from "react";


interface NavbarProps {
  searchQuery: string;
  setSearchQuery: (query: string) => void;
}

export default function Navbar({ searchQuery, setSearchQuery }: NavbarProps) {
  const [menuOpen, setMenuOpen] = useState(false);


  return (
    <header className="sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
      <div className="container flex h-16 items-center justify-between px-4 sm:px-6">
        <div className="flex items-center gap-2">
          <Link to="/" className="flex items-center space-x-2">
            <div className="rounded-full p-1 gradient-bg">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19.9 12.66C19.7221 12.9182 19.6069 13.2179 19.5639 13.5334C19.521 13.8489 19.5513 14.1711 19.6523 14.4711C19.7532 14.771 19.9213 15.0399 20.1417 15.2551C20.3621 15.4702 20.6285 15.6253 20.92 15.7066C20.842 16.0096 20.7331 16.3048 20.595 16.5866C20.2366 16.475 19.8542 16.4603 19.4871 16.5441C19.1201 16.628 18.7828 16.8071 18.5145 17.0627C18.2462 17.3183 18.0578 17.6404 17.9731 17.9941C17.8884 18.3479 17.9109 18.7177 18.038 19.0577C17.7743 19.2324 17.4964 19.3881 17.206 19.5231C16.9229 19.2683 16.5685 19.1096 16.193 19.071C16.0644 19.0624 15.9355 19.0624 15.807 19.071C15.5363 19.0822 15.2728 19.1556 15.0374 19.2852C14.802 19.4148 14.6017 19.5968 14.4523 19.8166C14.303 20.0364 14.2088 20.2875 14.1776 20.5502C14.1464 20.8129 14.1791 21.0789 14.273 21.3277C13.9605 21.3917 13.6422 21.4351 13.322 21.4577C13.2529 21.1074 13.0901 20.7831 12.8526 20.5196C12.615 20.2562 12.3115 20.0637 11.9765 19.9631C11.6414 19.8626 11.2876 19.8578 10.9501 19.9493C10.6126 20.0408 10.3045 20.2249 10.06 20.4816C9.74531 20.4628 9.43197 20.4235 9.122 20.364C9.19759 19.981 9.15475 19.5824 8.99905 19.2261C8.84335 18.8698 8.58212 18.5735 8.24962 18.3782C7.91712 18.183 7.53453 18.0988 7.15427 18.1376C6.77401 18.1763 6.41464 18.3363 6.1274 18.5933C5.94127 18.459 5.762 18.3133 5.59 18.1577C5.86953 17.8142 6.04272 17.3941 6.08774 16.9482C6.13275 16.5022 6.04722 16.0549 5.84179 15.6684C5.63636 15.282 5.32177 14.9753 4.93655 14.7895C4.55133 14.6036 4.11649 14.5483 3.7 14.6321C3.61306 14.3516 3.54387 14.0658 3.493 13.7757C3.81677 13.7075 4.11955 13.556 4.37213 13.3364C4.62471 13.1168 4.81845 12.8365 4.93549 12.5226C5.05252 12.2087 5.08903 11.8716 5.04152 11.5429C4.99402 11.2142 4.86418 10.9059 4.667 10.647C4.744 10.3847 4.83767 10.1271 4.948 9.877C5.25874 9.97435 5.59073 9.9784 5.90294 9.88884C6.21514 9.79927 6.49282 9.62073 6.7009 9.37736C6.90898 9.134 7.03844 8.83738 7.0727 8.52073C7.10697 8.20408 7.04434 7.88522 6.892 7.606C7.07492 7.44124 7.26851 7.28758 7.472 7.146C7.7618 7.35877 8.11312 7.47317 8.46975 7.4696C8.82637 7.46603 9.17533 7.34464 9.46034 7.12599C9.74534 6.90734 9.95436 6.60536 10.0565 6.26051C10.1586 5.91566 10.1493 5.54626 10.03 5.208C10.2792 5.10132 10.5372 5.00981 10.802 4.934C10.993 5.244 11.2787 5.48086 11.6133 5.61071C11.948 5.74056 12.315 5.75707 12.6593 5.65757C13.0036 5.55807 13.3073 5.34683 13.5229 5.05587C13.7385 4.7649 13.8546 4.40869 13.856 4.042C14.1683 4.00563 14.4838 3.987 14.8 3.987C14.7966 4.33875 14.8974 4.6825 15.0889 4.97244C15.2805 5.26239 15.5537 5.48351 15.8725 5.60724C16.1913 5.73097 16.5401 5.75129 16.8733 5.66479C17.2066 5.5783 17.5082 5.38879 17.736 5.122C18.018 5.21916 18.2919 5.33403 18.556 5.466C18.451 5.78136 18.4368 6.12 18.515 6.44406C18.5932 6.76813 18.7608 7.06163 18.9989 7.28919C19.237 7.51675 19.5359 7.66909 19.8569 7.72763C20.1779 7.78618 20.5075 7.74816 20.809 7.618C20.9304 7.84539 21.0412 8.07956 21.14 8.32C20.8383 8.47813 20.5853 8.71416 20.4084 9.00236C20.2315 9.29057 20.1377 9.62007 20.1368 9.956C20.136 10.2919 20.2282 10.622 20.4035 10.9111C20.5789 11.2002 20.8307 11.4375 21.132 11.597C21.1383 11.6037 21.1447 11.6103 21.151 11.617C21.217 11.9377 21.261 12.2631 21.283 12.591C20.8765 12.5397 20.4654 12.6147 20.1 12.675C19.9278 12.7043 19.7608 12.7643 19.608 12.851C19.711 12.724 19.812 12.594 19.9 12.46L19.9 12.66ZM13.936 17.8427C13.4996 16.9854 13.2939 16.0283 13.3371 15.0658C13.3802 14.1033 13.6708 13.1682 14.1812 12.3524C14.6915 11.5366 15.4054 10.8685 16.2487 10.4135C17.0919 9.95857 18.0353 9.73388 18.9868 9.7609C19.9384 9.78792 20.8662 10.0656 21.6799 10.5665C22.4936 11.0675 23.166 11.7742 23.6286 12.6181C24.0912 13.462 24.3274 14.4148 24.3167 15.3839C24.3059 16.353 24.0487 17.2998 23.5676 18.133C22.9093 19.29 21.874 20.169 20.6334 20.618C19.3927 21.0669 18.0296 21.0565 16.7975 20.5882C15.5655 20.1198 14.5434 19.224 13.9027 18.0558C13.9137 17.985 13.9247 17.9142 13.936 17.8427ZM7.28353 15.6702C6.24321 15.1756 5.39738 14.3343 4.89761 13.2954C4.39784 12.2566 4.27516 11.0825 4.55209 9.9638C4.82902 8.84511 5.48817 7.84334 6.40841 7.13998C7.32865 6.43663 8.45789 6.07323 9.60448 6.11042C10.7511 6.14761 11.8534 6.58269 12.7252 7.34307C13.597 8.10345 14.1915 9.14238 14.4095 10.2789C14.6275 11.4154 14.4563 12.597 13.9244 13.638C13.3924 14.6791 12.5301 15.5172 11.4825 16.0059C10.962 15.5446 10.3197 15.2534 9.63911 15.1682C8.95851 15.0831 8.27047 15.2084 7.66405 15.5271C7.54562 15.5865 7.42936 15.6542 7.3165 15.7267C7.3055 15.7074 7.29464 15.6889 7.28353 15.6702ZM10.0795 17.8427C9.8192 17.8427 9.56478 17.9149 9.34673 18.0506C9.12868 18.1863 8.95624 18.3801 8.85041 18.6092C8.74458 18.8382 8.71034 19.0922 8.75194 19.3381C8.79355 19.584 8.90906 19.8103 9.08271 19.9876C9.25636 20.1649 9.47832 20.2828 9.71958 20.3252C9.96085 20.3675 10.21 20.3326 10.4346 20.2248C10.6591 20.1169 10.849 19.9415 10.982 19.7194C11.1149 19.4974 11.1856 19.2383 11.1856 18.973C11.1856 18.6196 11.0475 18.2807 10.8023 18.0318C10.5571 17.7829 10.2232 17.6427 9.87521 17.6427H9.87577C9.94359 17.7104 10.008 17.7801 10.0689 17.8508L10.0795 17.8427ZM4.16031 7.5841C4.081 7.49425 3.9863 7.41449 3.88373 7.34722C3.78116 7.27996 3.6687 7.22633 3.55133 7.18862C3.43397 7.1509 3.31335 7.12959 3.19227 7.12552C3.0712 7.12145 2.94905 7.13472 2.82959 7.16477C2.58947 7.22511 2.37517 7.36268 2.22205 7.55527C2.06892 7.74786 1.98647 7.98817 1.99019 8.23552C1.99391 8.48286 2.08357 8.72042 2.24224 8.90862C2.40092 9.09682 2.61873 9.22863 2.86024 9.28246C3.10175 9.33629 3.35456 9.30832 3.57936 9.20276C3.80417 9.0972 3.98725 8.91977 4.09865 8.69864C4.21004 8.4775 4.24311 8.22602 4.19276 7.98297C4.19343 7.84932 4.16031 7.70726 4.16031 7.5841ZM19.0575 20.3327C19.2755 20.3327 19.489 20.2684 19.672 20.1474C19.8551 20.0265 19.9992 19.8541 20.086 19.6507C20.1727 19.4472 20.1977 19.2224 20.1576 19.0044C20.1175 18.7864 20.014 18.5846 19.86 18.4239C19.706 18.2632 19.5097 18.1504 19.2951 18.0903C19.0806 18.0302 18.8535 18.0254 18.6366 18.0768C18.4198 18.1281 18.2193 18.233 18.0594 18.3778C17.8996 18.5227 17.788 18.7016 17.7372 18.9002C17.6662 19.181 17.697 19.4789 17.8242 19.7392C17.9514 19.9996 18.167 20.2048 18.4301 20.3191C18.6279 20.3301 18.8401 20.33 19.0575 20.33V20.3327ZM8.51572 5.511C8.73675 5.51203 8.95331 5.44827 9.13844 5.32776C9.32357 5.20725 9.4697 5.03525 9.56077 4.83324C9.65183 4.63123 9.6835 4.40757 9.65155 4.18889C9.6196 3.97023 9.52546 3.76625 9.38018 3.60231C9.2349 3.43837 9.04464 3.32108 8.833 3.26423C8.62135 3.20737 8.39766 3.2135 8.18959 3.28196C7.98152 3.35041 7.80007 3.47802 7.66912 3.6479C7.53817 3.81777 7.46481 4.02199 7.45853 4.23299C7.45224 4.44398 7.51324 4.65212 7.63254 4.82937C7.75183 5.00662 7.92498 5.14468 8.12826 5.226C8.25371 5.47773 8.37902 5.511 8.51572 5.511ZM18.2291 4.86227C18.4473 4.82126 18.6437 4.70868 18.789 4.5422C18.9343 4.37573 19.0202 4.16426 19.0326 3.94249C19.0451 3.72072 18.9834 3.50124 18.8568 3.31969C18.7303 3.13815 18.5469 3.00643 18.3345 2.95053C18.122 2.89463 17.896 2.9178 17.6981 3.01581C17.5002 3.11381 17.3425 3.28052 17.2508 3.48424C17.159 3.68795 17.1388 3.91749 17.1936 4.13463C17.2485 4.35177 17.3748 4.54233 17.5548 4.67766C17.7394 4.83053 17.4995 4.81214 17.698 4.86227H18.2291ZM7.3548 20.8622C7.56611 20.857 7.76984 20.7898 7.94004 20.669C8.11024 20.5482 8.23923 20.3793 8.30919 20.1838C8.37915 19.9884 8.38658 19.7758 8.33056 19.5757C8.27454 19.3757 8.15774 19.1989 7.99728 19.0673C7.83683 18.9358 7.64343 18.8558 7.4392 18.8383C7.23496 18.8209 7.03177 18.8667 6.85469 18.9695C6.6776 19.0722 6.53549 19.2269 6.44923 19.4122C6.36297 19.5974 6.33679 19.8035 6.37484 20.0025C6.42419 20.2639 6.56221 20.4954 6.76479 20.6535C6.96739 20.8116 7.22014 20.8857 7.47682 20.8622H7.3548ZM5.0719 4.48001C5.21726 4.48001 5.35996 4.44371 5.48623 4.37468C5.61251 4.30564 5.71734 4.20645 5.78988 4.08626C5.86242 3.96607 5.89982 3.82942 5.8982 3.69006C5.89658 3.5507 5.85598 3.41492 5.78062 3.29615C5.70527 3.17739 5.59816 3.08025 5.4705 3.01376C5.34284 2.94727 5.19972 2.91405 5.05476 2.91702C4.9098 2.91999 4.76824 2.95906 4.64354 3.03006C4.51883 3.10107 4.41587 3.20198 4.34578 3.32316C4.24265 3.50178 4.20443 3.70847 4.23746 3.90992C4.27049 4.11136 4.37271 4.29634 4.5249 4.43264C4.67711 4.56895 4.86975 4.64855 5.0719 4.65869V4.48001ZM21.709 8.7968C21.9306 8.7968 22.1474 8.73128 22.3327 8.60722C22.5179 8.48315 22.6629 8.30586 22.7502 8.0987C22.8374 7.89154 22.8629 7.66403 22.8232 7.44457C22.7836 7.2251 22.6804 7.02347 22.5268 6.86781C22.3732 6.71216 22.1749 6.60745 21.9594 6.56785C21.7439 6.52825 21.5208 6.55606 21.3175 6.6451C21.1141 6.73413 20.9398 6.88207 20.8178 7.0705C20.6957 7.25894 20.6316 7.47885 20.6343 7.70342C20.6343 7.84696 20.6617 7.98919 20.7149 8.12172C20.7681 8.25426 20.8461 8.37426 20.944 8.47501C21.042 8.57575 21.1582 8.6552 21.2861 8.70884C21.414 8.76248 21.5508 8.78924 21.6883 8.78763L21.709 8.7968Z" fill="white"/>
              </svg>
            </div>
            <span className="font-bold text-xl hidden sm:block">PostVerse</span>
          </Link>
        </div>

        <div className="flex-1 flex justify-center px-2 max-w-md mx-4 hidden sm:flex">
          <div className="relative w-full">
            <Search className="absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground" />
            <Input
              type="search"
              placeholder="Search posts..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="w-full pl-8 rounded-full bg-secondary"
            />
          </div>
        </div>

        <div className="flex items-center gap-2">
          <Link to="/add-post" className="hidden sm:block">
            <Button variant="default" className="gradient-bg">
              Create Post
            </Button>
          </Link>
          <Button
            variant="ghost"
            size="icon"
            className="sm:hidden"
            onClick={() => setMenuOpen(!menuOpen)}
          >
            <Menu size={24} />
          </Button>
        </div>
      </div>

      {menuOpen && (
        <div className="sm:hidden p-4 border-t bg-background">
          <div className="mb-4">
            <div className="relative w-full">
              <Search className="absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground" />
              <Input
                type="search"
                placeholder="Search posts..."
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
                className="w-full pl-8 rounded-full bg-secondary"
              />
            </div>
          </div>
          <Link to="/add-post" className="block w-full">
            <Button variant="default" className="w-full gradient-bg">
              Create Post
            </Button>
          </Link>
        </div>
      )}
    </header>
  );
}
